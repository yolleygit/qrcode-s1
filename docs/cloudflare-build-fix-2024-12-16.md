# Cloudflare Pages æž„å»ºä¿®å¤ - 2024å¹´12æœˆ16æ—¥

## ðŸš¨ é—®é¢˜æè¿°

**æž„å»ºå¤±è´¥æ—¶é—´**: 2024å¹´12æœˆ16æ—¥ 10:09-10:10 UTC  
**é”™è¯¯ç±»åž‹**: npm ä¾èµ–ç‰ˆæœ¬å†²çª  
**å½±å“èŒƒå›´**: Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²å¤±è´¥  

### é”™è¯¯è¯¦æƒ…

```
npm error ERESOLVE could not resolve
npm error While resolving: @cloudflare/next-on-pages@1.13.16
npm error Found: next@16.0.10
npm error Could not resolve dependency:
npm error peer next@">=14.3.0 && <=15.5.2" from @cloudflare/next-on-pages@1.13.16
```

**æ ¹æœ¬åŽŸå› **: 
- é¡¹ç›®ä½¿ç”¨ `Next.js 16.0.10`
- `@cloudflare/next-on-pages@1.13.16` åªæ”¯æŒ `Next.js >=14.3.0 && <=15.5.2`
- ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´ä¾èµ–è§£æžå¤±è´¥

## âœ… è§£å†³æ–¹æ¡ˆ

### ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–åŒ…

ç”±äºŽé¡¹ç›®å·²é…ç½®ä¸ºé™æ€å¯¼å‡ºæ¨¡å¼ï¼ˆ`output: 'export'`ï¼‰ï¼Œ`@cloudflare/next-on-pages` åŒ…å®žé™…ä¸Šæ˜¯ä¸éœ€è¦çš„ã€‚

**ä¿®æ”¹å‰**:
```json
"devDependencies": {
  "@cloudflare/next-on-pages": "^1.13.16",
  "@tailwindcss/postcss": "^4",
  // ...
}
```

**ä¿®æ”¹åŽ**:
```json
"devDependencies": {
  "@tailwindcss/postcss": "^4",
  // ...
}
```

### æŠ€æœ¯åŽŸç†

1. **é™æ€å¯¼å‡ºæ¨¡å¼**: é¡¹ç›®ä½¿ç”¨ `output: 'export'` é…ç½®
2. **çº¯é™æ€æ–‡ä»¶**: æž„å»ºè¾“å‡ºä¸ºçº¯ HTML/CSS/JS æ–‡ä»¶
3. **æ— éœ€é€‚é…å™¨**: Cloudflare Pages åŽŸç”Ÿæ”¯æŒé™æ€æ–‡ä»¶æ‰˜ç®¡
4. **@cloudflare/next-on-pages**: ä¸»è¦ç”¨äºŽ Cloudflare Workers/Functionsï¼Œé™æ€ç«™ç‚¹ä¸éœ€è¦

## ðŸ”§ ä¿®å¤æ­¥éª¤

1. **ç§»é™¤ä¾èµ–åŒ…**:
   ```bash
   # ä»Ž package.json ä¸­ç§»é™¤ @cloudflare/next-on-pages
   ```

2. **é‡æ–°å®‰è£…ä¾èµ–**:
   ```bash
   npm install
   ```

3. **éªŒè¯æž„å»º**:
   ```bash
   npm run build
   ```

4. **æŽ¨é€ä¿®å¤**:
   ```bash
   git add .
   git commit -m "fix: ç§»é™¤ä¸å…¼å®¹çš„ @cloudflare/next-on-pages ä¾èµ–"
   git push origin main
   ```

## ðŸ“Š ä¿®å¤ç»“æžœ

### æž„å»ºçŠ¶æ€
- âœ… **æœ¬åœ°æž„å»º**: æˆåŠŸ
- âœ… **ä¾èµ–è§£æž**: æ— å†²çª
- âœ… **TypeScript**: ç¼–è¯‘é€šè¿‡
- âœ… **é™æ€å¯¼å‡º**: æ­£å¸¸ç”Ÿæˆ

### æ€§èƒ½ä¼˜åŒ–
- **ä¾èµ–åŒ…å‡å°‘**: ç§»é™¤ 67 ä¸ªä¸å¿…è¦çš„åŒ…
- **æž„å»ºæ—¶é—´**: ä¿æŒåœ¨ 2-3 ç§’
- **è¾“å‡ºæ–‡ä»¶**: 12 ä¸ªé™æ€é¡µé¢æ­£å¸¸ç”Ÿæˆ

## ðŸš€ éƒ¨ç½²é…ç½®

### Cloudflare Pages è®¾ç½®
**æž„å»ºé…ç½®**:
- **æž„å»ºå‘½ä»¤**: `npm run build`
- **è¾“å‡ºç›®å½•**: `out`
- **Node.js ç‰ˆæœ¬**: 18+ (æŽ¨è 18.17.0 æˆ–æ›´é«˜)

**é‡è¦**: é™æ€ç«™ç‚¹ä¸éœ€è¦ `wrangler.toml` æ–‡ä»¶ï¼ŒCloudflare Pages ä¼šè‡ªåŠ¨å¤„ç†é™æ€æ–‡ä»¶éƒ¨ç½²ã€‚

### å®‰å…¨å¤´é…ç½®
```
# _headers
/*
  X-Frame-Options: DENY
  X-Content-Type-Options: nosniff
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=()
```

## ðŸ” é¢„é˜²æŽªæ–½

### ä¾èµ–ç®¡ç†æœ€ä½³å®žè·µ

1. **å®šæœŸæ£€æŸ¥å…¼å®¹æ€§**:
   ```bash
   npm outdated
   npm audit
   ```

2. **é”å®šå…³é”®ç‰ˆæœ¬**:
   - Next.js ç‰ˆæœ¬ä¸Žéƒ¨ç½²å¹³å°å…¼å®¹æ€§
   - æ ¸å¿ƒä¾èµ–åŒ…çš„ç¨³å®šç‰ˆæœ¬

3. **æµ‹è¯•å¤šçŽ¯å¢ƒ**:
   - æœ¬åœ°å¼€å‘çŽ¯å¢ƒ
   - CI/CD æž„å»ºçŽ¯å¢ƒ
   - ç”Ÿäº§éƒ¨ç½²çŽ¯å¢ƒ

### ç‰ˆæœ¬å‡çº§ç­–ç•¥

1. **æ¸è¿›å¼å‡çº§**: é€æ­¥å‡çº§ä¸»è¦ä¾èµ–
2. **å…¼å®¹æ€§æµ‹è¯•**: å‡çº§å‰æ£€æŸ¥æ‰€æœ‰ä¾èµ–å…¼å®¹æ€§
3. **å›žæ»šå‡†å¤‡**: ä¿æŒç¨³å®šç‰ˆæœ¬çš„å¤‡ä»½

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [Next.js é™æ€å¯¼å‡ºæ–‡æ¡£](https://nextjs.org/docs/app/building-your-application/deploying/static-exports)
- [Cloudflare Pages éƒ¨ç½²æŒ‡å—](https://developers.cloudflare.com/pages/)
- [é¡¹ç›®éƒ¨ç½²æ–‡æ¡£](./deployment-guide.md)

## ðŸŽ¯ åŽç»­è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨
- [x] ç§»é™¤ä¸å…¼å®¹ä¾èµ–
- [x] éªŒè¯æœ¬åœ°æž„å»º
- [ ] æŽ¨é€ä¿®å¤åˆ° GitHub
- [ ] éªŒè¯ Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²

### é•¿æœŸä¼˜åŒ–
- [ ] å»ºç«‹ä¾èµ–ç‰ˆæœ¬ç›‘æŽ§
- [ ] å®Œå–„ CI/CD æµç¨‹
- [ ] æ·»åŠ æž„å»ºçŠ¶æ€æ£€æŸ¥

---

**ä¿®å¤è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ  
**ä¿®å¤ç±»åž‹**: ä¾èµ–ç‰ˆæœ¬å†²çªè§£å†³  
**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ  
**éªŒè¯çŠ¶æ€**: âœ… æœ¬åœ°æž„å»ºæˆåŠŸ  
**ä¸‹ä¸€æ­¥**: æŽ¨é€ä»£ç éªŒè¯ Cloudflare Pages éƒ¨ç½²

*æ­¤ä¿®å¤è§£å†³äº† Next.js 16.0.10 ä¸Ž @cloudflare/next-on-pages çš„ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œç¡®ä¿ Cloudflare Pages èƒ½å¤Ÿæ­£å¸¸æž„å»ºå’Œéƒ¨ç½²é¡¹ç›®ã€‚*