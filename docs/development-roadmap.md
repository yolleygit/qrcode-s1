# QR Master 开发路线图

## 📊 项目概览

QR Master 是一个功能丰富的在线二维码生成工具，支持静态二维码、动画二维码和即将推出的 TOTP 动态验证码功能。

**🔧 最新配置更新：** 项目默认端口已从 3000 更改为 3001，避免与其他开发服务的端口冲突。详见 [端口配置说明](./port-configuration.md)。

## ✅ 已完成功能

### 🎯 核心二维码功能
- ✅ **基础二维码生成** - 支持 URL、文本等内容
- ✅ **高度自定义** - 颜色、样式、Logo、边距等
- ✅ **实时预览** - 所见即所得的编辑体验
- ✅ **高清导出** - PNG、SVG 格式下载
- ✅ **样式库** - 预设样式快速应用

### 🎬 动画二维码功能
- ✅ **颜色渐变动画** - 线性、径向、圆锥渐变
- ✅ **形状变换动画** - 方形、圆形、菱形等变换
- ✅ **呼吸效果** - 缩放和透明度动画
- ✅ **实时预览** - 播放控制和进度管理
- ✅ **多格式导出** - GIF、MP4、SVG 动画
- ✅ **配置管理** - 保存、加载、分享动画配置

### 🌐 用户体验功能
- ✅ **国际化支持** - 中文、英文界面
- ✅ **响应式设计** - 完美适配移动设备
- ✅ **暗黑模式** - 明亮/暗黑主题切换
- ✅ **隐私保护** - 本地生成，无数据上传
- ✅ **错误处理系统** - 全面的错误捕获和用户友好的错误恢复机制
  - ✅ **全局错误边界** - React错误边界组件，提供友好的错误界面和恢复选项
  - ✅ **网络状态监控** - 实时监控网络连接，离线提示和自动重连
  - ✅ **智能错误分类** - 自动识别错误类型，提供针对性的解决建议
  - ✅ **用户友好提示** - 中文错误信息和操作指导，支持重试机制
  - ✅ **移动端适配** - 错误界面完美适配移动设备，符合触摸标准
- ✅ **统一导航体验** - 跨页面一致的导航和品牌标识
- ✅ **基础可访问性** - 部分ARIA标签和屏幕阅读器支持

## 🚀 开发中功能

### 🎨 UI界面深度优化 (重点项目升级中)

**🎯 重大需求升级**: 从"全面优化"升级为"深度优化"，强调**所见即所得**和**无滚动体验**的极致用户体验  
**当前状态：** 基础功能已完成，核心架构实施中，TOTP页面优化进行中  
**完成进度：** 基础优化 75%，所见即所得系统 100%，无滚动布局 100%，页面重构 35%  
**预计完成时间：** 2025年第二季度（延长以支持极致体验目标）

#### 已完成的核心功能 ✅
1. **统一导航系统** - 跨页面一致的导航栏和品牌标识 ✅ **已完成**
2. **错误处理系统** - 全面的错误捕获和用户友好的错误恢复机制 ✅ **已完成**
3. **网络状态监控** - 实时网络连接监控和离线提示 ✅ **已完成**
4. **基础可访问性** - 部分ARIA标签和屏幕阅读器支持 ✅ **已完成**

#### 新增核心目标 🎯 (需求升级)
1. **所见即所得体验** - 输入内容时立即显示结果，300ms内实时响应 ✅ **100%完成，核心架构已实现**
2. **无滚动界面** - 核心功能在单屏内完成，避免页面滚动操作 ✅ **100%完成，SmartLayout系统已实现**
3. **一体化界面** - 所有相关功能集成在同一视图中，无需页面跳转 🔄 **35%完成，页面重构进行中**
   - ✅ 静态二维码页面已完成
   - 🔄 TOTP页面优化进行中 (25%完成)
   - ⏳ 加密二维码页面待实施
4. **智能响应式** - 桌面端左右分栏、平板端上下分栏、手机端折叠式布局 ✅ **85%完成，核心系统已实现**

#### 已完成的基础功能 ✅
1. **用户偏好持久化** - 主题、语言、QR样式记忆功能 ✅ **已完成**
2. **用户引导系统** - 分步引导、上下文帮助、功能介绍 ✅ **已完成**
3. **懒加载性能优化** - 代码分割、组件懒加载、预加载策略 ✅ **已完成**
4. **桌面端功能增强** - 键盘快捷键、拖拽上传、右键菜单 ✅ **已完成**
5. **完整可访问性** - 全面的ARIA标签、键盘导航支持 ✅ **已完成**

#### 升级后的极致目标
- **所见即所得** - 输入即预览的极致流畅体验，300ms内响应
- **无滚动界面** - 核心功能在单屏内完成，无需滚动操作
- **一体化界面** - 所有相关功能集成在同一视图中，避免页面跳转
- **智能响应式** - 根据设备自动调整最佳布局模式（左右分栏/上下分栏/折叠式）
- **界面一致性** - 三个核心功能保持统一的布局和交互模式
- **极致流畅** - 实时预览、即时反馈、一键操作的流畅体验

### 🔐 TOTP 动态验证码 (重点开发)

**当前状态：** 基础结构已完成 → UI界面优化进行中  
**最新进展：** TOTP页面布局优化已开始，集成所见即所得体验

#### 阶段 1: MVP 核心功能 (优先级：🔥 高)
**预计完成时间：** 2-3 周 → **✅ 已基本完成**

- [x] **项目结构搭建** ✅ **已完成**
  - ✅ 安装 crypto-js 依赖
  - ✅ 创建 `/totp` 路由和组件结构
  - ✅ 定义 TypeScript 类型接口

- [x] **核心算法实现** ✅ **已完成**
  - ✅ TOTP 算法（SHA-1, 6位, 30秒）
  - ✅ Base32 密钥生成和编码
  - ✅ OTPAuth URI 标准格式生成
  - ✅ 定时器服务和倒计时功能

- [x] **基础 UI 组件** ✅ **已完成**
  - ✅ 服务名称和账户名输入表单
  - ✅ 二维码显示（集成 qr-code-styling）
  - ✅ 验证码显示和倒计时
  - ✅ 复制功能和下载功能

- [x] **集成和测试** ✅ **已完成**
  - ✅ 页面路由和导航集成
  - ✅ 国际化文本添加（中英文）
  - 🔄 Google Authenticator 兼容性验证（测试中）

**MVP 交付成果：** ✅ **已基本实现**
- ✅ 完整的 TOTP 二维码生成功能
- ✅ 实时验证码显示和倒计时
- ✅ 基础移动端适配（响应式设计）
- ✅ 中英文界面支持
- ✅ 密钥复制和二维码下载功能

#### 🔄 UI界面优化进展 (新增 - 2024年12月15日开始)
**目标：** 将TOTP页面重构为所见即所得的一体化界面

**已完成的优化：** ✅ **70%完成**
- ✅ **统一页面布局** - 集成UnifiedPageLayout，与其他页面保持一致
- ✅ **左右分栏布局** - 使用UnifiedContentLayout实现桌面端分栏显示
- ✅ **实时预览系统** - 集成useRealTimePreview，输入密钥后立即生成二维码
- ✅ **实时状态指示** - 使用RealTimeStatus显示生成状态和密钥质量
- ✅ **统一操作按钮** - 集成UnifiedActionButtons，提供一致的下载、复制、分享体验
- ✅ **智能密钥处理** - 支持Base32、十六进制等多种格式自动识别
- ✅ **增强验证码显示** - 大字体、倒计时、一键复制的优化体验

**待完成的优化：** 🔄 **30%待实施**
- [ ] **SmartLayout集成** - 应用无滚动布局系统
- [ ] **移动端优化** - 完善折叠式界面和触摸体验
- [ ] **性能优化** - 实现缓存和防抖优化
- [ ] **界面简化** - 进一步减少操作步骤

**技术架构升级：**
```typescript
// 当前架构
<UnifiedPageLayout>
  <UnifiedContentLayout
    inputArea={<TOTPConfigForm />}
    previewArea={<QRCodePreview />}
    previewActions={<UnifiedActionButtons />}
  />
</UnifiedPageLayout>

// 计划升级为
<SmartLayout noScroll>
  <InputPanel><TOTPConfigForm /></InputPanel>
  <PreviewPanel><QRCodePreview /></PreviewPanel>
</SmartLayout>
```

#### 阶段 2: 功能增强 (优先级：🟡 中)
**预计开始时间：** MVP 完成后

- [ ] **高级配置选项**
  - 多种哈希算法（SHA-256, SHA-512）
  - 可调验证码长度（6位/8位）
  - 灵活时间窗口（15秒/30秒/60秒）

- [ ] **验证和管理功能**
  - 验证码校验功能
  - 配置本地存储
  - 密钥/URI/二维码导出

- [ ] **移动端优化**
  - 触摸友好界面
  - 性能优化
  - 移动端特定功能

#### 阶段 3: 质量保证 (优先级：🟢 低)
**预计开始时间：** 功能稳定后

- [ ] **测试完善**
  - 属性测试（fast-check）
  - 集成测试
  - 跨浏览器兼容性测试

- [ ] **性能优化**
  - 代码分割和懒加载
  - 内存使用优化
  - 渲染性能提升

## 📅 开发时间线

### 2024年第四季度
- ✅ **Q4 已完成** - 动画二维码功能完整实现
- ✅ **Q4 已完成** - 移动端优化和用户体验提升

### 2025年第一季度
- 🎨 **Q1 重大突破** - UI界面优化项目基础功能已完成
  - ✅ **错误处理系统** - 全局错误边界、网络状态监控、智能错误分类已完成
  - ✅ **统一导航体验** - 跨页面一致的导航和品牌标识已实现
  - ✅ **用户偏好持久化** - 主题、语言、QR样式记忆功能已完成
  - ✅ **用户引导系统** - 分步引导、上下文帮助、功能介绍已完成
  - ✅ **懒加载性能优化** - 代码分割、组件懒加载、预加载策略已完成
- 🎯 **Q1 需求升级** - 从"全面优化"升级为"深度优化"，强调所见即所得体验
- 🔄 **Q1 新目标** - 开始实现实时预览系统和无滚动布局架构
- 🔥 **Q1 重点** - TOTP 功能 MVP 开发和发布
- ✅ **Q1 重大进展** - 核心算法和用户界面已完成，正在进行测试和优化

### 2025年第二季度
- 🎯 **Q2 重大目标** - UI界面深度优化完成，实现所见即所得极致体验
- 🔧 **Q2 计划** - TOTP 功能完善和优化
- 📊 **Q2 目标** - 用户反馈收集和功能迭代
- 🛡️ **Q2 重大突破** - 加密二维码核心功能已完成开发

### 🔒 加密二维码功能 (核心开发已完成)

**当前状态：** ✅ 核心架构和服务已完成，进入 UI 开发阶段  
**完成进度：** 约 70%  
**预计发布：** 2025年第二季度

#### 已完成的核心组件 ✅
- **项目架构** - 完整的 TypeScript 接口定义和服务结构
- **CryptoService** - AES-256-GCM 加密算法和 PBKDF2-SHA256 密钥派生（当前实现）
- **QRCodeService** - 加密数据序列化和二维码生成解析
- **DisguiseService** - 伪装文本管理和内容切换
- **EncryptedQRService** - 统一的主服务接口
- **SecurityService** - 完整性验证和安全检查
- **ConfigService** - 配置管理和参数验证

#### 当前开发任务 🔄
- **用户界面组件** - 加密/解密页面的 React 组件
- **文件处理功能** - 二维码上传下载和批量处理
- **路由集成** - 与现有应用的导航集成
- **属性测试** - 基于 fast-check 的安全性验证测试
- **✅ 类型兼容性修复** - 解决了 Web Crypto API 的 TypeScript 类型问题

### 2025年第三季度
- 🔒 **Q3 重点** - 加密二维码功能完善和发布
- 🛡️ **Q3 目标** - 完成用户界面和高级功能
- 🔐 **Q3 里程碑** - 正式发布加密二维码 MVP 版本

## 🎯 开发策略

### MVP 优先原则
1. **快速交付** - 优先实现核心可用功能
2. **用户验证** - 通过 MVP 收集用户反馈
3. **迭代改进** - 基于反馈逐步完善功能

### 质量保证
1. **渐进式开发** - 每个阶段都有明确的交付标准
2. **兼容性优先** - 确保与主流应用的完全兼容
3. **安全第一** - 所有涉及密钥的操作都要考虑安全性

### 用户体验
1. **一致性** - 保持与现有功能的界面风格一致
2. **易用性** - 简化操作流程，降低学习成本
3. **可访问性** - 支持多语言和移动端访问

## 📊 技术债务管理

### 当前技术债务
- 🟡 **中等** - 部分组件可以进一步优化复用性
- 🟢 **低** - 测试覆盖率可以进一步提升
- 🟢 **低** - 文档可以更加完善

### 债务偿还计划
- **TOTP 开发期间** - 重构可复用组件，提升代码质量
- **功能稳定后** - 补充测试用例，完善文档
- **长期维护** - 持续优化性能和用户体验

## 🔄 版本发布计划

### v2.1.0 - TOTP MVP (计划中)
- 🔐 TOTP 基础功能
- ⏰ 实时验证码显示
- 📱 移动端基础适配

### v2.2.0 - TOTP 增强 (计划中)
- 🔧 高级配置选项
- 💾 配置管理功能
- 📱 移动端优化

### v2.3.0 - 质量提升 (计划中)
- 🧪 完整测试覆盖
- ⚡ 性能优化
- 📚 文档完善

## 📞 参与开发

### 开发环境配置

项目使用 VS Code 作为推荐开发环境，包含预配置设置：

**当前配置**：
```json
{
    "kiroAgent.configureMCP": "Disabled"
}
```

**配置说明**：
- **Kiro Agent MCP**: 已禁用自动配置，采用手动管理模式
- **MCP 协议**: 禁用 Model Context Protocol 自动配置功能
- **配置文件**: `.vscode/settings.json`
- **安全考虑**: 手动管理外部工具连接，提供更好的安全控制
- **详细说明**: 参见 [开发环境配置指南](development-setup.md)

### 开发者指南
- 查看 [任务列表](../.kiro/specs/animated-qr-code/tasks.md) 了解详细开发任务
- 参考 [设计文档](../.kiro/specs/animated-qr-code/design.md) 了解技术架构
- 阅读 [需求文档](../.kiro/specs/animated-qr-code/requirements.md) 了解功能需求
- 配置开发环境请参考 [开发环境配置](development-setup.md)
- 📱 **最新进展** - 查看 [移动端优化进展报告](mobile-optimization-progress.md) 了解当前实施状态

### 贡献方式
1. **功能开发** - 参与 TOTP 功能的实现
2. **测试验证** - 帮助测试功能的正确性和兼容性
3. **文档完善** - 改进用户指南和技术文档
4. **反馈建议** - 提供用户体验和功能改进建议

---

*最后更新：2024年12月 | 下次更新：TOTP MVP 完成后*

## 🔒 规划中功能

### 🛡️ 加密二维码 (设计阶段)

**当前状态：** 需求分析和技术设计已完成  
**预计开始时间：** 2025年第二季度  
**完成度：** 设计文档 100%，开发 0%

#### 功能概述
加密二维码功能将为用户提供军用级的数据保护能力，允许将敏感信息（如密码、私钥、个人信息等）安全地嵌入到看似普通的二维码中。该功能采用双层保护机制：伪装层显示无害内容，加密层保护真实数据。

#### 核心特性
- **🔐 军用级加密**：支持 AES-256-GCM 和 ChaCha20-Poly1305 两种顶级加密算法
- **🛡️ 防暴力破解**：当前使用 PBKDF2-SHA256 100,000 次迭代，计划升级到 Argon2id
- **🎭 伪装保护**：二维码外观与普通二维码无异，未授权扫描只显示伪装内容
- **🔍 完整性验证**：自动检测数据篡改，确保解密数据的完整性和真实性
- **🎨 样式定制**：支持 Logo 嵌入、颜色定制和多种输出格式（PNG、SVG、PDF）
- **📱 跨平台兼容**：生成的二维码可在所有主流设备和扫描应用中正常使用

#### 安全设计亮点

**防暴力破解机制：**
- **当前实现**：PBKDF2-SHA256 算法，100,000 次迭代
- **计划升级**：Argon2id 算法，内存成本 64MB，时间成本 3秒
- **密码强度要求**：最少 12 位，包含大小写字母、数字、特殊字符
- **盐值长度**：32 字节随机盐值，确保彩虹表攻击无效
- **时间锁定机制**：连续失败 3 次后强制等待 30 秒

**🔧 技术说明：**
- 由于 argon2-browser 依赖兼容性问题，当前使用 PBKDF2 作为临时方案
- PBKDF2-SHA256 仍提供强大的安全保护，符合行业标准
- 正式版本将解决依赖问题并升级到 Argon2id

**加密算法安全性：**
- 使用经过验证的标准算法（AES-256-GCM、ChaCha20-Poly1305）
- 256 位密钥长度，理论破解时间超过宇宙年龄
- 支持算法升级迁移，确保长期安全性

#### 开发计划

**阶段 1: MVP 核心功能 (Q2 2025)**
- 基础加密解密（仅 AES-256-GCM 算法）
- 使用 PBKDF2-SHA256 密钥派生（临时方案）
- 基础黑白二维码生成
- 核心用户界面（加密页面、解密页面）
- 防暴力破解核心机制

**阶段 2: 功能增强 (Q3 2025)**
- 添加 ChaCha20-Poly1305 算法支持
- 完全自定义二维码样式
- Logo 嵌入和水印功能
- 多种输出格式（PNG、SVG、PDF）
- 批量处理功能

**阶段 3: 高级功能 (Q4 2025)**
- 高级配置选项
- 配置文件导入导出
- 性能优化和移动端适配
- 完整的测试覆盖

#### 技术架构

**分层设计：**
- **用户界面层**：加密界面、解密界面、样式定制组件
- **服务层**：加密二维码服务、数据验证服务、配置管理服务
- **核心层**：加密服务、二维码服务、存储服务

**安全考虑：**
- 所有加密操作在客户端完成，不上传敏感数据
- 内存中密钥及时清零，防止内存泄漏
- 使用 Web Crypto API 和密码学安全的随机数生成器
- 完整的错误处理，不泄露敏感信息

#### 使用场景

**个人用户：**
- 安全存储和分享密码、私钥等敏感信息
- 保护个人身份信息和财务数据
- 创建安全的数字遗产备份

**企业用户：**
- 员工凭证和访问密钥的安全分发
- 客户敏感信息的安全传输
- 合规性要求的数据保护

**开发者：**
- API 密钥和配置信息的安全存储
- 生产环境密码的安全管理
- 安全的配置文件分发

#### 竞争优势

与市面上现有解决方案相比，我们的加密二维码功能具有以下独特优势：

1. **隐蔽性**：外观与普通二维码完全相同，不会引起注意
2. **军用级安全**：采用最高级别的加密算法和防护机制
3. **用户友好**：无需专业知识，普通用户也能轻松使用
4. **跨平台兼容**：生成的二维码可在任何设备上扫描
5. **开源透明**：所有加密算法和实现完全开源，可审计

#### 风险评估和缓解

**技术风险：**
- **浏览器兼容性**：使用 Web Crypto API 可能在老旧浏览器中不支持
  - *缓解措施*：提供 polyfill 和降级方案
- **性能问题**：高强度加密可能导致计算时间过长
  - *缓解措施*：使用 Web Workers 异步处理，提供进度反馈

**安全风险：**
- **侧信道攻击**：计算时间可能泄露密码信息
  - *缓解措施*：使用常数时间算法，添加随机延迟
- **内存泄漏**：敏感数据可能残留在内存中
  - *缓解措施*：及时清零内存，使用安全的数据处理方式

**用户体验风险：**
- **密码遗忘**：用户忘记密码将无法恢复数据
  - *缓解措施*：提供密码强度指导，建议使用密码管理器
